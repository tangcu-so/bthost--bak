{extend name="common/base" /}
{block name="content"}
<div class="row">

    <div class="col-lg-12">
        <div class="card" id="loading_box">
            <header class="card-header">
                <div class="card-title">站点重置</div>
            </header>
            <div class="card-body">
                <div id="toolbar" class="toolbar-btn-action">
                    <button id="btn_reset" type="button" class="btn btn-primary m-r-5 btn_reset" data-type="retable">
                        站点重置
                    </button>
                </div>
                <hr>
                <small class="text-danger warning_info">
                    <span class="text-danger">!</span> 【警告】站点重置将删除网站及网站内所有数据文件(不包含数据库)，属于高危操作，请提前备份站点源码及数据库信息，如出现意外请求造成的丢失，概不负责<br>
                    <span class="text-danger">!</span> 【警告】站点重置将自动解除除赠送域名外所有手动绑定的域名信息，如需使用，请尝试重新绑定域名（包括子目录）<br>
                    <span class="text-danger">!</span> 【警告】站点重置有一定几率失败，如失败，请联系站点进行手动重置操作<br>
                    <span class="text-danger">!</span> 【警告】站点重置后请查看站点信息及功能是否能够正常使用，如有疑问请带图联系站长<br>
                </small>
            </div>
        </div>
    </div>
</div>
{/block}
{block name="script"}
<script>
    $('#btn_reset').click(function () {
        $.confirm({
            title: '请仔细阅读！！！',
            content: $('.warning_info').html(),
            icon: 'mdi mdi-alert',
            animation: 'scale',
            closeAnimation: 'zoom',
            buttons: {
                confirm: {
                    text: '立即重置',
                    btnClass: 'btn-orange',
                    action: function () {
                        var l = $('#loading_box').lyearloading({
                            opacity: 0.125,
                            spinnerSize: 'lg'
                        });
                        $.post('{:url("index/vhost/hostreset")}', {}, function (res) {
                                EchoMsg(res.msg);
                            })
                            .fail(function () {
                                EchoMsg('请求错误，请稍候重试');
                            })
                            .always(function () {
                                l.destroy();
                            })
                    }
                },
                '取消': function () {

                }
            }
        });
    });
</script>
{/block}